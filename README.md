# ai-foundry-sdk-agents

To run foundry-agents: `uv run foundry-agents`

## Prerequisites

### Pre-release Dependencies

This project uses **pre-release versions** of Azure AI SDK packages to access the latest evaluation features. The following dependencies require pre-release installation:

- `azure-ai-projects>=1.1.0b4` (pre-release)
- `azure-ai-agents>=1.2.0b4` (automatically installed as dependency)

#### Installation

When installing dependencies, you **must** use the `--prerelease=allow` flag:

```bash
# Install all dependencies including pre-releases
uv sync --prerelease=allow

# Or add new pre-release packages
uv add --prerelease=allow azure-ai-projects>=1.1.0b4
```

#### Why Pre-release?

The stable versions of `azure-ai-projects` don't include the evaluation classes (`Evaluation`, `InputDataset`, `EvaluatorConfiguration`) required by the cloud evaluation functionality in `cloud_eval.py`. These classes are only available in the beta versions (1.1.0b4+).

**Note:** Pre-release versions may have breaking changes or bugs. Use with caution in production environments.

## Dataset Information

Dataset used (Sample of Canadian FHIR Data: [https://synthea.mitre.org/downloads](https://synthea.mitre.org/downloads))

### FHIR Dataset Analysis and ER Triage Use Cases

The dataset contains **FHIR (Fast Healthcare Interoperability Resources) Bundle** files with comprehensive medical data for synthetic patients. This is synthetic healthcare data generated by [Synthea](https://github.com/synthetichealth/synthea) for research and development purposes.

#### Dataset Structure

Each FHIR Bundle file contains multiple healthcare resource types:

1. **Patient Information**
   - Demographics (name, gender, birth date, address)
   - Contact information and marital status

2. **Medical Records Include:**
   - **Encounters**: Healthcare visits and appointments
   - **Observations**: Vital signs, lab results, clinical measurements
   - **Conditions**: Diagnosed medical conditions with dates
   - **Procedures**: Medical procedures performed
   - **Medications**: Prescribed medications
   - **Immunizations**: Vaccination history
   - **Diagnostic Reports**: Lab and imaging results

#### Example Patient Data (Aaron697 Stanton715)

**Demographics:**

- Gender: Male
- Birth Date: November 6, 1981 (43 years old)
- Location: Prince Edward Island, Canada

**Medical History:**

- **COVID-19** (March 2020): Confirmed case with respiratory symptoms
- **Laceration of forearm** (November 2018): Required suturing
- **Current Vitals**: Height 167.2cm, Weight 69.6kg, BMI 24.9, BP 123/82
- **Medications**: Ibuprofen 200 MG (as needed)
- **Immunizations**: Seasonal influenza vaccine and routine immunizations

### How to Use This Data for ER Triage

#### 1. Risk Stratification

- Age-based risk assessment
- Previous medical conditions and procedures
- Current medications and potential interactions
- Baseline vital signs for comparison

#### 2. Critical Information for Triage

- **Allergy Information**: Drug allergies before medication administration
- **Previous Procedures**: Patient's tolerance and experience
- **Respiratory History**: Previous respiratory issues (e.g., COVID-19)
- **Baseline Vitals**: Established normal ranges for the patient

#### 3. Clinical Decision Support

- **Medication Interactions**: Check against current prescriptions
- **Procedure History**: Previous tolerance and outcomes
- **Chronic Conditions**: Ongoing health management needs
- **Emergency Contacts**: Family/caregiver information

#### 4. Triage Priority Scoring

Historical data informs:

- **ESI (Emergency Severity Index)** scoring
- **Pain assessment** baseline comparison
- **Vital sign trends** against patient's normal ranges
- **High-risk conditions** screening

#### 5. Care Coordination

- Previous healthcare providers for continuity
- Complete medication reconciliation
- Follow-up needs based on medical history

### Technical Implementation Opportunities

Build ER triage systems that:

1. **Parse FHIR data** to extract relevant medical history
2. **Create patient risk profiles** based on historical conditions
3. **Provide clinical decision support** with medication/allergy alerts
4. **Generate triage recommendations** using historical context
5. **Track vital sign trends** compared to patient baselines

### Triage Questions This Data Answers

- ✅ Drug allergies and contraindications
- ✅ Baseline vital signs and normal ranges
- ✅ Previous respiratory or cardiac issues
- ✅ Current medications and potential interactions
- ✅ Previous emergency visits or procedures
- ✅ Immunization status for infectious disease protocols

This synthetic dataset provides realistic examples of how comprehensive medical histories can significantly improve ER triage accuracy and patient safety through essential clinical context.

## Troubleshooting

### Import Errors

If you encounter import errors like `No name 'Evaluation' in module 'azure.ai.projects.models'`, ensure you have:

1. Installed the pre-release version: `uv sync --prerelease=allow`
2. Verified the installed version: `uv pip show azure-ai-projects` (should be 1.1.0b4 or higher)
3. Restarted your IDE/language server to pick up the new package versions

### Environment Variables

Make sure to set up your Azure credentials and endpoints in a `.env` file:

```bash
AZURE_AI_PROJECTS_ENDPOINT=your_endpoint_here
AZURE_DEPLOYMENT_NAME=your_deployment_name
AZURE_ENDPOINT=your_azure_endpoint
AZURE_API_KEY=your_api_key
```
